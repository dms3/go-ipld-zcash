package ipldzec

import (
	"encoding/hex"
	"testing"
)

// tx is c96bf4704e0b1ee3389aae3cc26d26ea6e94cf7a066d9c9ba1b89de3964a0aa5
var txdata = "020000000001f6790100000000001976a914f8837a289e79d818e66437523c65a9d8dd78ba4888ac0000000001000000000000000006a10100000000000c7875e91c48a39ed57b9c7785312e5fa7ecebb77b19e55c1f4c20b9ed45985f2709ab818243297079e17299ca18c5142d947348e7f779f93b4018c62ae157398b76fb98ec861a1fef8aaa1b288842cbbae4311dd0bdd116854cc20e594a7c88d08edbb2c8be24fdd53ab232b310cd33d34b1029d76174487d9b1802d5f4779f76179b680a8ccc9112a1d4c9223b638256834fc288161a014cfad62087f8263101820c3fd38e38144b1ffc5dc970468ce103ea910e94faada73c78bf6c9d085792014f92456401cd46ada142a0213945577caaa22090f2ebf82f2beb55d68796ac3e376d773c1ce678e1e901b47420650756f12b252705ec51f2efb6185686c0ed16d053e7800901995efe3a257b561e9712cb2bdf3f520b5fca08b30924accb0220ac58a6e71bb379dff3d1b37653b4602698ec607965aa9d5ca97f2beb7a4ec602168eeabb087c705011558f2772336ef02be16d206d404ecfa79183b3ec8756880a014dcad4090bdf5f3676478ba54f48d4bdeb38b91cd8f4eafe1e60ededa7c0ba39e279bb3cefeb268eb38ca0a7311a86dbed0d0cec0f545dd9e36361060cdfd603144f8c19eb09581838de98686eb5013f57dec112117564b8c444cd59a884d217030b25207e5954533cb10d18b853ef90080a5914caefd732beb424adac2b89d60a02080bd7a4e204dc43f7b5fea10046be932abad517139cde7dbba655b57e81fa5e020b99c2004461cc32dfdf6f93b35554cdd51e7b8a2aff7318b25c22bcee8adc09032f6bb102a0df98e8227c42977c1fb0c9282ed2f021c6e91e22cce1e9208884f8dc9b06c8f9786d989c4a7f00bafdc5c1f741d82b3e077c4182ef48f5572371c86ae9087c299300a894909f208d7ddfbdf055fce1c2d64bb7ae987ce29f1679268b5da05fbf1a1976eb86935d32a3a2235dcf88dda7b823dd6a82f9a769c699b2c8ab14d4ce1a1d12fb31b0d483939018050c3b43bdfdf7efb4d7128d491684c73f56283a3dd33469334abc60fe90383e013b05cf6b149be9e1cc9008924e2e918e8f4c7f05bf4b2041d760a60a3d89c24f9f0fd62a58607453e22bad55d244a2bfb767a6d8267a174bec0b5556b005b65ccd52c78868a33d4df17468d157b365fb8a4fb35c6cb640a3832c9ef1de0f8b7064cbeb7622996d0ac68d854d5feec5bc676183f168f8e2a5b8908397db4d656546b74dcf6149268eb41aa5aefb96b9d134e11554df688ce357da0e136d37e32bafbf02eba258e74ea2110a679ca5ebf26ac5820f15d614e4559e667032090a39db63195e2e118d1e8257c0e335ad6c0e2898acae340423dc85de9c1e7b8677281624f44e86200e447829112406a059dd240480e547cdc886acd8dcac7475e19d4af1445ba789ec774459366b4a266452933de9e029e8b64e4a53ff655c351e68ba5fe65bf595233332a01999f564827c55877ddf30810b77239ea49425008c9dda3cd3b947f028782df5784b062c7a9d27d6aa818cea816f8ae4daf2a0d38c87460383a77d7e4b135693e045d713d160204a3deb216b70681015ceea79b156f94a8151fb98d75d23c39e5920c83aa0377d4acfabb09a14d2292adb36b22bf74976fa836eb96af039d130b1bb22f719734e1e9290cff1983254175e96962af16d64c45b7a52c1045f6434b76ab9441d08f30e475e78d41d106931f6db5f429ad90051703c2f5f0311a61c8eff0eb22e554c71f1dc5ba7b88afb6ae596386e5276aee90047dbbbca5c5fca1a9a46aee8ad680ca322c186a75ed021cd834fdad4067a50379ebf1db3b3764ffe1045b098edbda70050330f4e2bfa1d959deac31666d275b037a6084c18a753e06148ed1cdd2ace6e767d6f45030318ba0d825efb7456128df62dc0577fe8ccd65851e7b67ceb330716246a34dafb5070c1dd0ef3514b01fdc143eeb22306aada41d894d1ee0e8bc5c01c2823acadef973c7af84a4196afd0925d2269026bce4d6ee8b57d6f8760205d5ac291101363ec425fb13f5b87352a189e91bae4dff2f32ef24301619fe93211ec3348f4dead86b4b87460bd62751ff19cd53eacee3dc554e3b85da22df71f827ca932b82ef10e27bff0502a4b9895636a6771c485893430da50ff2fb26de9c56ed13b8a0775c9346906b9f67f39b3d401715667d6e6cf87fc8b507d08bd4b2da45f81ae2f069de2e3d78dac0d8679a327e66339e978796408b17a7e13ad5e00f05567b91f8b9d667d12115971b529847fbb4d35061af7dcf1f4b51cdf1f225bb0b447c4c0ffad1adcdb2b2a197f741621b57d0a71fffdac9b25eac0a146d8f53a697cab55a08864d94c8a9a03a04fbb98164f3f2f24e6b90ef4bcd78c352d4aedcdaecae6aae5c929864fc4d50bd0bdeb476a8bc0dd568c7bd0ecdd6ca91e7550215f137afc595913a6a0c4f2387eae302e2da75ea217b822a58c5bcb7f6befa1ffa500e649bd417fbab53266373e7bf7758ebd4c37724233c315f847cf7519a6c2ba81eeaaee4a1d03e8abd343ee121f6b2bc34f76ee8462929e17c9a6d16c6c5e2e790d89a22806f82d0eef5e768371b76357b4298bacc0447d8ddd0876120ca2a98dd36c3e2efb0563b2b6781fd35e3ea6e338b4027780947a8ecc7a8cae47b49562a43418f84560e4f008"

var blkdata = "04000000bdba5af75cf20ef60821044eb900c8017f82cfd983fdd50b584c709e87000000ebed09bc58296281d2dba82f1b57721383313024b35c3df6a86bc6ebb7a44d6600000000000000000000000000000000000000000000000000000000000000007060115847ac071eed00000000000000050000000000000000000000000000000000000000000000fd400500278158e1591056cbe6445e74cd0ae2b45b5bfdc4005f92dcf00f363143a1e2c06bab96415abd2b3ece30fda75601ef9ec7e45ef3eaa273d716e4379946974512a73574a0e58bf8e554c4ba74204eee6437c6d10333f40234147881d66c48890a7bcec6507c9a22fa126ead4d2e59f997971791e2722e5a45d4533150e20c552679170e6c20dd29b86c45ce379e2310bbfcd213acaf5e81c72a530a918227bdf2fbb8d2bbec575f008fa53d582a0baff997d4eb8072f5fab1a95ce27009f7d2e8594b36d5ed65892e89e4d39e9cbe5d474e0729c0ca1a0e92339fdfe870c3714ee2c92d78da384f02f4ac8eb32521e7909973b1e688ff4ed0bbee4c0735784696886069acb9f45c7735027e21d03be2a50d195a926b6b1ec9b49711430394b063eff17f9be40c5d992e732ebc49de9da215235b80473a7b7f7ec41adf7fe50ac902e719ea7247da44ee225208bbef8c00a0f5d85169498f4e6d2449ee34ec827010f7433e15eb30bb19dc734f311a097ac85a8bdf5d9c5f9c2a05a70d986a1295c6b0c284df833797369626bc19e724d6b4375c5f5cd79461192394fc047298af94df8d07128efbc0cb54395039a24876b64e91d82bbff0b81ab5cbe5545dbfb5a66601d2e82f4b6c95ade7f58d12269f29e82c4427e1fe354670c0156d9932918d246e2eb47330a9cf8b75b73aab3d55fde6ffcd3aa88c0359a64bcee209aba3ed0797ed7575437ec59de047165451aa41959319c7a7f3f5e651c70a61463a211f059526a4fdd8fb7ad860f28ba7761ef1381b302a22087b0b9eb89922d6ff2572b7def0e475efe916d9db04c9b9d729372dd7edfe823087bbd778937d26c1de0a8f74f0c29e40a4f9b7d3894c432ca60b91d4d0662e3dfd20fa944fe4aab2b6f3616734b2f0fbd9c8303c0fe3ce8b57d6731237045c58e5ce6a63a93e30ce0071c465b5c4d406c234d4a7fd776ba23f02feb7ad3c0dc3e33df55793dc66243cf4a36655685c7c29b804c92d14fa82ac0b7c33d0f547d2597e20d2ddd60711aea65d939d8ff929d062cdb43ac9bd2092d883df0118e7b7a74c98c07994b1aeeb94c86e62f65e6af021c3250d2d5efa36fe32552906b92079da2ab8d44f15d46a9d2a49b399406a03ad6d37cd190470f012483f28e2459420adfdfe7b45a070d0457bae873d76f302789b8ecbd182e2ad6d83aad6c33929bfc90eac1f0a192d116acdd7ffbdb3a4d0a0ae055977e152f77e084029ce27894a6defe7a2eee13fc550cc7ebb588e13a563c55b90f435ebbeb13ae0bfb2106b89ffcfb303858ddeadded3034d36b2ec7fb10c1a71a5dda5351187cac580584b9756acc2a63cc2cfecd9ebd4bc9513e3dfa4e0456210bbd9c2213f32ef9aed5cd8341d15bf21f8928dd5b27f89b1af22547705b58779f196013adca39fa7a415605161606315c7c56e487be99c5e972cb153dae59f8cc916ac26b82a55f233b84a6d0a0c7eb673d231d2e95d22544ca8724a0c8d76e84e80f5453c35289157fd62b91776ec33d2621f9d5f150acf7c9357efda1fdf0eeb99186048839a5a9f97af0bf0c1e053d41d99ad8c32ae9bf8c979fcf8b065211a7aab4ba652410cb9b7d8de59fe4eca5c5d3516b620bb815813d981698ae3c36ce6e495852cc1b1454401dcb3a92f178dbfb0a3812cecbf59f2a95b994e18096311c4c803f0a799a85205713da815d0377fea2307cd0eb1c707eb7263d7c5aea7d6d1418e1dcd8878084b36e54e505a8f3d9380daa2a07b7055082676a204a6a0690d54093f778232d1482d43b547413187ff26ce2f646a5c3f371523269885e6675318567bbf580a7f864d44c334d7fdee546a9d3b7c8269efde19c80b443d69898bf7d9ac3ee5f7f4b8be2b1f847db5100101000000010000000000000000000000000000000000000000000000000000000000000000ffffffff05025e0a0148ffffffff0260d7e80700000000232103e6e3d3e5d37fc02f46f3d952c4aeb30433ba5cd2c5303c8f04228d0ce35f03d7acd835fa010000000017a914ef775f1f997f122a062fff1a2d7443abd1f9c6428700000000"

func TestBlockDecoding(t *testing.T) {
	data, err := hex.DecodeString(blkdata)
	if err != nil {
		t.Fatal(err)
	}

	out, err := DecodeBlock(data)
	if err != nil {
		t.Fatal(err)
	}

	_ = out
}

func TestTxDecoding(t *testing.T) {
	data, err := hex.DecodeString(txdata)
	if err != nil {
		t.Fatal(err)
	}

	tx, err := DecodeTx(data)
	if err != nil {
		t.Fatal(err)
	}

	if tx.LockTime != 0 {
		t.Fatal("lock time incorrect, got: ", tx.LockTime)
	}

	t.Log(tx)

}
